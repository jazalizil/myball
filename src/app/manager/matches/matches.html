<div id="matches-calendar">
  <mb-navbar></mb-navbar>
  <div class="fixed bg full-height">
    <div class="bg-img fit-height full-width"></div>
  </div>
  <md-content class="main-content scroll-content">
    <section class="relative z-index">
      <mb-calendar matches="matches.data.allMatches" today="matches.data.today" layout></mb-calendar>
    </section>
    <section class="relative z-index">
      <md-content class="fit-height">
        <div class="t-head full-width" layout="row">
          <div flex="10"></div>
          <div layout layout-align="center center" flex="25" class="field white"
               ng-repeat="field in matches.data.fields | limitTo: matches.data.limitTo | startFrom: matches.data.startFrom">
            {{field.name}}
          </div>
        </div>
        <div class="t-body fit-height fit-width" layout="column">
          <div layout="row" class="slot-ctn" ng-repeat="hour in matches.data.hours" ng-hide="hour.value > 27" ng-class="{'first' : $first}">
            <div layout layout-align="center start" flex="10" class="white relative">
              <span ng-show="hour.value * 10 % 10 === 0" class="absolute center-text fit-width hour">{{hour.text}}</span>
            </div>
            <div layout flex="25" class="slot {{hour.value * 10 % 10 !== 0 ? 'border-dashed' : 'border-solid'}} relative"
                 ng-repeat="field in matches.data.fields | limitTo: matches.data.limitTo | startFrom: matches.data.startFrom">
              <div class="match-ctn absolute pointer" ng-click="matches.openSidenav(hour, field)"
                   ng-hide="matches.data.hours[$parent.$index - 1].matches[field._id] ||
                   matches.data.hours[$parent.$index + 1].matches[field._id] || hour.value >= 23.5">
                <div layout="row" class="match fit-height fit-width"
                     ng-hide="hour.matches[field._id] || hour.booked[field._id]">
                  <div layout="column" layout-align="center center" class="fit-width">
                    <i class="material-icons green">add_circle</i>
                  </div>
                </div>
                <div layout="row" class="match booked fit-height fit-width" ng-if="hour.matches[field._id]"
                     ng-style="{'height': 100 * {{hour.matches[field._id].duration}} + '%'}">
                  <div layout="column" class="fit-width fit-height">
                    <div layout="row" layout-align="center center" class="fit-width fit-height">
                      <div flex="45" layout layout-align="center center">
                        <img src="assets/icons/user-2.svg"/>
                        <span class="{{matches.data.statusToColor[hour.matches[field._id].teams[0].status].color}}">
                          &nbsp;{{hour.matches[field._id].teams[0].currentPlayers || '0'}}</span>
                      </div>
                      <div class="white uppercase" flex="10" layout layout-align="center center">
                        vs
                      </div>
                      <div flex="45" layout layout-align="center center">
                        <img src="assets/icons/user-2.svg"/>
                        <span class="{{matches.data.statusToColor[hour.matches[field._id].teams[1].status].color}}">
                          &nbsp;{{hour.matches[field._id].teams[1].currentPlayers || '0'}}
                        </span>
                      </div>
                    </div>
                    <div class="fit-width fit-height absolute white teams" layout="row" layout-align="center end">
                      <div flex="50" layout layout-align="center center">
                        {{hour.matches[field._id].teams[0].name}}
                      </div>
                      <div flex="50" layout layout-align="center center">
                        {{hour.matches[field._id].teams[1].name}}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </md-content>
    </section>
    <div class="match-edit" ng-include="'app/manager/matches/match-edit.tpl.html'"></div>
  </md-content>
</div>
